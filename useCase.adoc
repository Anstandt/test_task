
== Use Case

*ID* UC-1.1  

*Название* Осуществить перевод денег на счет другому лицу

*Действующее лицо* Пользователь

*Предусловия*

. Пользователь аутентифицирован и авторизован в  веб/мобильном приложении
. Система выводит список доступных операций

=== Основной поток
   
. Пользователь выбирает операцию “Перевести деньги на счет другому человеку”.
. Система выводит список доступных типов перевода.
. Пользователь выбирает тип “По номеру счета”.
. Система выводит список счетов пользователя.
. Пользователь выбирает счет, с которого хочет перевести деньги.
. Система проверяет, что переводы с этого счета возможны.
. Система выводит форму для ввода сведений перевода.
. Пользователь вводит данные о счете получателя: ФИО получателя, БИК банка, номера счета.
. Пользователь указывает сумму перевода, назначение перевода.
. Система проверяет БИК банка по справочнику “БИК”.
. Система рассчитывает комиссию перевода.
. Пользователь выбирает функцию “Отправить  перевод”.
. Система проверяет данные, указанные в переводе.
. Система сохраняет данные о переводе.
. Система запрашивает у пользователя код подтверждения.
. Пользователь вводит полученный код подтверждения.
. Система списывает сумму размера перевода и комиссии со выбранного счета пользователя.
. Система зачисляет комиссию на счет банка.
. Система отправляет поручение о зачислении денег на счет Внешнего банка. 
. Система получает из Внешней системы сообщение об успешном получении сведений о переводе.
. Система сообщает о завершении операции.

=== Расширение
*6a С выбранного счета невозможно сделать перевод*

** *6а1* Система обнаруживает, что с выбранного счета невозможно сделать перевод.
** *6а2* Система оповещает пользователя об  ошибке.
** *6а3* Выполнение сценария возвращает в основной поток в п.2

*10a Введен некорректный БИК банка*

** *10а1* Система обнаруживает, что БИК банка не найден в справочнике “БИК”
** *10а2* Система оповещает пользователя об  ошибке.
** *10а3* Выполнение сценария возвращает в основной поток в п.6

*13a Введен некорректный номер счета получателя*

** *13а1* Система обнаруживает, что введенный номер счета не соответствует контрольной сумме.
** *13а2* Система оповещает пользователя об  ошибке.
** *13а3* Выполнение сценария возвращает в основной поток в п.8

*13b Пользователь не является владельцем счета*

** *13b1* Система обнаруживает, что введенный номер счета не соответствует контрольной сумме.
** *13b2* Система оповещает пользователя об  ошибке.
** *13b3* Выполнение сценария возвращает в основной поток в п.5

*13с На счете недостаточно денег для совершения перевода*

** *13c1* Система обнаруживает, что на выбранном счете пользователя не хватает денег для проведения перевода.
** *13c2* Система оповещает пользователя об  ошибке.
** *13c3* Выполнение сценария возвращает в основной поток в п.10

*16a Пользователь ввёл неверный код*

** *16а1* Система обнаруживает, что пользователь ввел неверный код подтверждения.
** *16а2* Система оповещает пользователя об  ошибке.
** *16a3* Система удаляет код подтверждения..
** *16а4* Выполнение сценария возвращает в основной поток в п.13
